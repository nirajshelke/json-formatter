/* Copyright (c) 2015-present, salesforce.com, inc. All rights reserved
  Licensed under BSD 3-Clause - see LICENSE.txt or git.io/sfdc-license */

:host([data-render-mode="shadow"]) [part~='card'] {
  padding-block-start: var(--sds-c-card-spacing-block-start, var(--sds-c-card-spacing-block, 0));
  padding-block-end: var(--sds-c-card-spacing-block-end, var(--sds-c-card-spacing-block, 0));
  padding-inline-start: var(--sds-c-card-spacing-inline-start, var(--sds-c-card-spacing-inline, 0));
  padding-inline-end: var(--sds-c-card-spacing-inline-end, var(--sds-c-card-spacing-inline, 0));
  background: var(--sds-c-card-color-background, transparent);
  border-width: var(--sds-c-card-sizing-border, 1px);
  border-style: solid;
  border-color: var(--sds-c-card-color-border, transparent);
  border-radius: var(--sds-c-card-radius-border, 0.25rem);
  background-clip: padding-box;
  box-shadow: var(--sds-c-card-shadow);
  color: var(--sds-c-card-text-color);
}

:host([data-render-mode="shadow"]) [part~='header'] {
  padding-block-start: var(--sds-c-card-header-spacing-block-start, var(--sds-c-card-header-spacing-block));
  padding-block-end: var(--sds-c-card-header-spacing-block-end, var(--sds-c-card-header-spacing-block));
  padding-inline-start: var(
    --sds-c-card-header-spacing-inline-start,
    var(--sds-c-card-header-spacing-inline)
  );
  padding-inline-end: var(--sds-c-card-header-spacing-inline-end, var(--sds-c-card-header-spacing-inline));
  margin-block-end: var(--sds-c-card-header-spacing-block-end);
}

:host([data-render-mode="shadow"]) [part~='body'] {
  margin-block-start: var(--sds-c-card-body-spacing-block-start, var(--sds-c-card-body-spacing-block));
  margin-block-end: var(--sds-c-card-body-spacing-block-end, var(--sds-c-card-body-spacing-block));
  padding-inline-start: var(--sds-c-card-body-spacing-inline-start, var(--sds-c-card-body-spacing-inline));
  padding-inline-end: var(--sds-c-card-body-spacing-inline-end, var(--sds-c-card-body-spacing-inline));
}

:host([data-render-mode="shadow"]) [part~='footer'] {
  padding-block-start: var(--sds-c-card-footer-spacing-block-start, var(--sds-c-card-footer-spacing-block));
  padding-block-end: var(--sds-c-card-footer-spacing-block-end, var(--sds-c-card-footer-spacing-block));
  padding-inline-start: var(
    --sds-c-card-footer-spacing-inline-start,
    var(--sds-c-card-footer-spacing-inline)
  );
  padding-inline-end: var(--sds-c-card-footer-spacing-inline-end, var(--sds-c-card-footer-spacing-inline));
  margin-block-start: var(--sds-c-card-footer-spacing-block-start);
  text-align: var(--sds-c-card-footer-text-align);
  border-top-width: var(--sds-c-card-footer-sizing-border, 1px);
  border-top-style: solid;
  border-top-color: var(--sds-c-card-footer-color-border, transparent);
}

/**
 * @Note: Static fallbacks are in place until SLDS adopts SDS. Without static
 *        fallbacks, styles will regress due to invalid CSS variables from
 *        missing SLDS shared and globalsâ€”where applicable, sometimes we do
 *        want the initial value, e.g. inherit.
 */

@supports (--styling-hooks: '') {
  :host([data-render-mode="shadow"]) {
    --sds-c-card-text-color: var(--slds-c-card-text-color);
    --sds-c-card-color-background: var(--slds-c-card-color-background, var(--sds-g-color-neutral-base-1));
    --sds-c-card-color-border: var(--slds-c-card-color-border, var(--sds-g-color-neutral-base-4));
    --sds-c-card-radius-border: var(--slds-c-card-radius-border, var(--sds-g-radius-border-2, 0.25rem));
    --sds-c-card-shadow: var(--slds-c-card-shadow, var(--sds-g-shadow-1, 0 0 2px 0 #18181814, 0 2px 4px 1px #18181828));
    --sds-c-card-spacing-block: var(--slds-c-card-spacing-block);
    --sds-c-card-spacing-block-start: var(--slds-c-card-spacing-block-start);
    --sds-c-card-spacing-block-end: var(--slds-c-card-spacing-block-end);
    --sds-c-card-spacing-inline: var(--slds-c-card-spacing-inline);
    --sds-c-card-spacing-inline-start: var(--slds-c-card-spacing-inline-start);
    --sds-c-card-spacing-inline-end: var(--slds-c-card-spacing-inline-end);
  }

  :host([data-render-mode="shadow"][variant~='borderless']) {
    --slds-c-card-color-border: transparent;
    --slds-c-card-shadow: none;
    --slds-c-card-header-spacing-block-start: 0;
    --slds-c-card-header-spacing-inline: 0;
    --slds-c-card-body-spacing-inline: 0;
    --slds-c-card-footer-spacing-block-end: 0;
  }

  :host([data-render-mode="shadow"]) [part~='header'] {
    /**
     * Provide layout control through the part API. See icon, title, and actions
     * parts below for more layout controls.
     */
    display: grid;
    grid-template-columns: auto minmax(0, 1fr) auto;
    grid-template-areas: 'icon title actions';
    align-items: center;
    --sds-c-card-header-spacing-block: var(--slds-c-card-header-spacing-block);
    --sds-c-card-header-spacing-block-start: var(
      --slds-c-card-header-spacing-block-start,
      var(--sds-g-spacing-3, 0.75rem)
    );
    --sds-c-card-header-spacing-block-end: var(--slds-c-card-header-spacing-block-end);
    --sds-c-card-header-spacing-inline: var(--slds-c-card-header-spacing-inline, var(--sds-g-spacing-3, 0.75rem));
    --sds-c-card-header-spacing-inline-start: var(--slds-c-card-header-spacing-inline-start);
    --sds-c-card-header-spacing-inline-end: var(--slds-c-card-header-spacing-inline-end);

    /**
     * These become reassignments once base headings get hooks.
     * See [part~='header'] h2 rule block for more info.
     */
    color: var(--slds-c-card-header-text-color);
    font-weight: var(--slds-g-font-weight-bold, var(--sds-g-font-weight-bold, bold));
    font-size: var(--slds-c-card-header-font-size);

    /*
     * Icon reassignments
     *
     * Scope the icon hook assignment to the 'header' part so icons passed
     * into other slots don't inadvertently pick up on these values.
     */
    --sds-c-icon-sizing: 1.5rem; /* @JB: may not need this after slds-icon is done */
    --sds-c-icon-spacing-inline-end: var(
      --slds-c-card-header-icon-spacing-inline-end,
      var(--sds-g-spacing-3, 0.75rem)
    );
  }

  /*
   * Header's grid layout areas
   *
   * The header sections utilize grid areas and 'part' apis to allow the header's
   * layout be modular (grid-area) and explicitly customized (part).
   */
  :host([data-render-mode="shadow"]) [part~='icon'] {
    grid-area: icon;
    line-height: 0;
  }
  :host([data-render-mode="shadow"]) [part~='title'] {
    grid-area: title;
  }
  :host([data-render-mode="shadow"]) [part~='actions'] {
    grid-area: actions;
  }

  /**
   * This would be a reassignment in :host if styling hooks existed for headings.
   * Until that exists, we have to do a hard reset here. This can be removed once
   * headings get hooks.
   *
   * :host { --sds-g-heading-font-size: var(--slds-c-card-heading-font-size); }
   */
  :host([data-render-mode="shadow"]) [part~='title'] h2 {
    font-weight: inherit;
    font-size: inherit;
  }

  /**
   * Recreating truncation explicitly here so the behavior is consistent with
   * current SLDS.
   *
   * @TODO: Evaluate if this should be a utility or something similar.
   */
  :host([data-render-mode="shadow"]) [part~='title'] span {
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /**
   * The body's default padding is none. LBC uses utilities to add padding through the slot content.
   */
  :host([data-render-mode="shadow"]) [part~='body'] {
    --sds-c-card-body-spacing-inline: var(--slds-c-card-body-spacing-inline);
    --sds-c-card-body-spacing-inline-start: var(--slds-c-card-body-spacing-inline-start);
    --sds-c-card-body-spacing-inline-end: var(--slds-c-card-body-spacing-inline-end);
    --sds-c-card-body-spacing-block: var(--slds-c-card-body-spacing-block);
    --sds-c-card-body-spacing-block-start: var(
      --slds-c-card-body-spacing-block-start,
      var(--sds-g-spacing-3, 0.75rem)
    );
    --sds-c-card-body-spacing-block-end: var(--slds-c-card-body-spacing-block-end, var(--sds-g-spacing-3, 0.75rem));
  }

  :host([data-render-mode="shadow"]) [part~='footer'] {
    --sds-c-card-footer-spacing-inline: var(--slds-c-card-footer-spacing-inline, var(--sds-g-spacing-3, 0.75rem));
    --sds-c-card-footer-spacing-inline-start: var(--slds-c-card-footer-spacing-inline-start);
    --sds-c-card-footer-spacing-inline-end: var(--slds-c-card-footer-spacing-inline-end);
    --sds-c-card-footer-spacing-block: var(--slds-c-card-footer-spacing-block, var(--sds-g-spacing-3, 0.75rem));
    --sds-c-card-footer-spacing-block-start: var(--slds-c-card-footer-spacing-block-start);
    --sds-c-card-footer-spacing-block-end: var(--slds-c-card-footer-spacing-block-end);
    --sds-c-card-footer-color-border: var(
      --slds-c-card-footer-color-border,
      var(--sds-g-color-neutral-base-4)
    );
  }
}
